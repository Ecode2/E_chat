{% extends 'base.html' %}

{% block title %}Admin Pannel{% endblock title %}

{% block navItem %}
    <li class="nav-item" title="{{current_user.username}}" data-bs-toggle="tooltip" data-bs-placement="right">
        <a class="nav-link py-3 border-bottom rounded-0" href="#"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 16 16" class="bi bi-person-square">
        <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"></path>
        <path d="M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2zm12 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1v-1c0-1-1-4-6-4s-6 3-6 4v1a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12z"></path>
        </svg>
        </a>
    </li>

    <li class="nav-item" title="Create User" data-bs-toggle="tooltip" data-bs-placement="right">
        <a class="nav-link py-3 border-bottom rounded-0" href="#" data-bs-toggle="modal" data-bs-target="#modal-user">
            <svg class="bi bi-person-plus-fill" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 16 16">
                <path d="M1 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H1zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"></path>
                <path fill-rule="evenodd" d="M13.5 5a.5.5 0 0 1 .5.5V7h1.5a.5.5 0 0 1 0 1H14v1.5a.5.5 0 0 1-1 0V8h-1.5a.5.5 0 0 1 0-1H13V5.5a.5.5 0 0 1 .5-.5z"></path>
            </svg>
        </a>
    </li>

    <li class="nav-item" title="Create Room" data-bs-toggle="tooltip" data-bs-placement="right">
        <a class="nav-link py-3 border-bottom rounded-0" href="#" data-bs-toggle="modal" data-bs-target="#modal-chat"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 16 16" class="bi bi-chat-text">
        <path d="M2.678 11.894a1 1 0 0 1 .287.801 10.97 10.97 0 0 1-.398 2c1.395-.323 2.247-.697 2.634-.893a1 1 0 0 1 .71-.074A8.06 8.06 0 0 0 8 14c3.996 0 7-2.807 7-6 0-3.192-3.004-6-7-6S1 4.808 1 8c0 1.468.617 2.83 1.678 3.894zm-.493 3.905a21.682 21.682 0 0 1-.713.129c-.2.032-.352-.176-.273-.362a9.68 9.68 0 0 0 .244-.637l.003-.01c.248-.72.45-1.548.524-2.319C.743 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.52.263-1.639.742-3.468 1.105z"></path>
        <path d="M4 5.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zM4 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 4 8zm0 2.5a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1h-4a.5.5 0 0 1-.5-.5z"></path>
        </svg>
        </a>
    </li>

    <li class="nav-item" title="Delete User" data-bs-toggle="tooltip" data-bs-placement="right">
        <a class="nav-link py-3 border-bottom rounded-0" href="#" data-bs-toggle="modal" data-bs-target="#del-user">
            <svg class="bi bi-person-x-fill" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 16 16" style="font-size: 15px;">
                <path fill-rule="evenodd" d="M1 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H1zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm6.146-2.854a.5.5 0 0 1 .708 0L14 6.293l1.146-1.147a.5.5 0 0 1 .708.708L14.707 7l1.147 1.146a.5.5 0 0 1-.708.708L14 7.707l-1.146 1.147a.5.5 0 0 1-.708-.708L13.293 7l-1.147-1.146a.5.5 0 0 1 0-.708z"></path>
            </svg>
        </a>
    </li>

    <li class="nav-item" title="Delete Room" data-bs-toggle="tooltip" data-bs-placement="right">
        <a class="nav-link py-3 border-bottom rounded-0" href="#" data-bs-toggle="modal" data-bs-target="#del-room">
            <svg class="bi bi-trash" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="red" viewBox="0 0 16 16" style="font-size: 15px;">
                <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5Zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5Zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6Z"></path>
                <path d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1ZM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118ZM2.5 3h11V2h-11v1Z"></path>
            </svg>
        </a>
    </li>

{% endblock navItem %}

{% block header %}
    <header class="container">

    </header>
{% endblock header %}

{% block content %}

    <section class="container py-3 py-xl-4">
        <div class="row mb-3 mt-5">
            <div class="text-center mx-auto">
                <h2>All Chat Rooms</h2>
            </div>
        </div>
        <div class="row row-cols-1  py-3">
            {% for room in rooms %}
                <div class="col">
                    <div class="d-flex justify-content-center rounded rooms">
                        <div class="bs-icon-sm bs-icon-rounded d-flex flex-shrink-0 justify-content-center align-items-center my-3 mx-4 d-inline-block bs-icon sm w-10" 
                            data-bs-toggle="modal" data-bs-target="#modal-{{room.id}}" >
                            <svg class="bi bi-trash" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="red" viewBox="0 0 16 16" style="font-size: 15px;">
                                <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5Zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5Zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6Z"></path>
                                <path d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1ZM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118ZM2.5 3h11V2h-11v1Z"></path>
                            </svg>
                        </div>

                        <div class="px-2 py-3 w-75 text-center">
                            <h5 class="mb-0 mt-1"> {{ room.roomname }} : Id -- {{room.id}} <a href="{{url_for('chat.room', room_id=room.id)}}">Â¶</a> </h5>
                        </div>

                        <div class="modal fade" role="dialog" tabindex="-1" id="modal-{{room.id}}">
                            <div class="modal-dialog" role="document">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h2 class="modal-title"><strong>Delete Room: {{room.roomname}} </strong></h2>
                                        <button class="btn-close" type="button" aria-label="Close" data-bs-dismiss="modal"></button>
                                    </div>
                                    <div class="modal-body">
                                        <form class="text-center" method="post">
                                            {{ delete_form.hidden_tag() }}

                                            <div class="mb-3">
                                                {{ delete_form.roomid.label(class = 'form-label', value = '<strong>Room Id</strong>' ) }}
                                                {{ delete_form.roomid(class = 'form-control', value = room.id ) }}
                                            </div>
                                            <div class="mb-3">
                                                {{ delete_form.roomname.label(class = 'form-label', value = '<strong>Room Name</strong>' ) }}
                                                {{ delete_form.roomname(class = 'form-control', value = room.roomname ) }}
                                            </div>
                                            <div class="mb-3">
                                                {{ delete_form.submit(class = 'btn btn-danger d-block w-100', value = 'Delete') }}
                                            </div>
                                        </form>
                                    </div>
                                    <div class="modal-footer">
                                        <button class="btn btn-light" type="button" data-bs-dismiss="modal">Close</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                
                </div>
            {% endfor %}

        </div>

    </section>

    <section class="container py-3 py-xl-4">
        <div class="row mb-3 mt-5">
            <div class="text-center mx-auto">
                <h2>All Users</h2>
            </div>
        </div>
        <div class="row row-cols-1  py-3">
            {% for user in users %}
                {% if user.id == 1 %}

                {% else %} 
                <div class="col">
                    <div class="d-flex justify-content-center rounded rooms">
                        <div class="bs-icon-sm bs-icon-rounded  d-flex flex-shrink-0 justify-content-center align-items-center my-3 mx-4 d-inline-block bs-icon sm w-10" 
                            data-bs-toggle="modal" data-bs-target="#modal-{{user.id}}" >
                            <svg class="bi bi-trash" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="red" viewBox="0 0 16 16" style="font-size: 15px;">
                                <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5Zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5Zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6Z"></path>
                                <path d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1ZM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118ZM2.5 3h11V2h-11v1Z"></path>
                            </svg>
                        </div>

                        <div class="px-2 py-3 w-75 text-center">
                            <h5 class="mb-0 mt-1"> {{ user.username }} : Id -- {{user.id}} </h5>
                        </div>

                        <div class="modal fade" role="dialog" tabindex="-1" id="modal-{{user.id}}">
                            <div class="modal-dialog" role="document">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h2 class="modal-title"><strong>Delete User: {{user.username}} </strong></h2>
                                        <button class="btn-close" type="button" aria-label="Close" data-bs-dismiss="modal"></button>
                                    </div>
                                    <div class="modal-body">
                                        <form class="text-center" method="post">
                                            {{ delete_user.hidden_tag() }}

                                            <div class="mb-3">
                                                {{ delete_user.userid.label(class = 'form-label', value = '<strong>User Id</strong>' ) }}
                                                {{ delete_user.userid(class = 'form-control', value = user.id ) }}
                                            </div>
                                            <div class="mb-3">
                                                {{ delete_user.username.label(class = 'form-label', value = '<strong>User Name</strong>' ) }}
                                                {{ delete_user.username(class = 'form-control', value = user.username ) }}
                                            </div>
                                            <div class="mb-3">
                                                {{ delete_user.submit(class = 'btn btn-danger d-block w-100', value = 'Delete') }}
                                            </div>
                                        </form>
                                    </div>
                                    <div class="modal-footer">
                                        <button class="btn btn-light" type="button" data-bs-dismiss="modal">Close</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                
                </div>
                {% endif %}
            {% endfor %}

        </div>

    </section>

    <article class="modal fade" role="dialog" tabindex="-1" id="modal-chat">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header" style="text-align: center;">
                    <h3 class="modal-title"><strong>Create New Chatroom</strong></h3><button class="btn-close" type="button" aria-label="Close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form class="text-center" method="post">
                        {{ create_room.hidden_tag() }}

                        <div class="mb-3">
                            {{create_room.roomname(class = 'form-control', placeholder = 'Room Name' ) }}
                        </div>
                        <div class="mb-3">
                            {{create_room.roompass(class = 'form-control', placeholder = 'Password' ) }}
                        </div>
                        <div class="mb-3">
                            {{ create_room.submit(class = 'btn btn-primary d-block w-100', value = 'Create') }}
                        </div>

                    </form>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-light" type="button" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </article>

    <article class="modal fade" role="dialog" tabindex="-1" id="modal-user">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header" style="text-align: center;">
                    <h3 class="modal-title"><strong>Create New Chatroom</strong></h3><button class="btn-close" type="button" aria-label="Close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form class="text-center" method="post">
                        {{ create_user.hidden_tag() }}

                        <div class="mb-3">
                            {{create_user.username(class = 'form-control', placeholder = 'User Name' ) }}
                        </div>
                        <div class="mb-3">
                            {{create_user.password(class = 'form-control', placeholder = 'Password' ) }}
                        </div>
                        <div class="mb-3">
                            {{create_user.confirm_pass(class = 'form-control', placeholder = 'Confirm password' ) }}
                        </div>
                        <div class="mb-3">
                            {{ create_user.submit(class = 'btn btn-primary d-block w-100', value = 'Create') }}
                        </div>

                    </form>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-light" type="button" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </article>

    <article class="modal fade" role="dialog" tabindex="-1" id="del-room">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 class="modal-title"><strong>Delete Room </strong></h2>
                    <button class="btn-close" type="button" aria-label="Close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form class="text-center" method="post">
                        {{ delete_form.hidden_tag() }}

                        <div class="mb-3">
                            {{ delete_form.roomid.label(class = 'form-label', value = '<strong>Room Id</strong>' ) }}
                            {{ delete_form.roomid(class = 'form-control') }}
                        </div>
                        <div class="mb-3">
                            {{ delete_form.roomname.label(class = 'form-label', value = '<strong>Room Name</strong>' ) }}
                            {{ delete_form.roomname(class = 'form-control' ) }}
                        </div>
                        <div class="mb-3">
                            {{ delete_form.submit(class = 'btn btn-danger d-block w-100', value = 'Delete') }}
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-light" type="button" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </article>

    <article class="modal fade" role="dialog" tabindex="-1" id="del-user">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 class="modal-title"><strong>Delete User </strong></h2>
                    <button class="btn-close" type="button" aria-label="Close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form class="text-center" method="post">
                        {{ delete_user.hidden_tag() }}

                        <div class="mb-3">
                            {{ delete_user.userid.label(class = 'form-label', value = '<strong>User Id</strong>' ) }}
                            {{ delete_user.userid(class = 'form-control') }}
                        </div>
                        <div class="mb-3">
                            {{ delete_user.username.label(class = 'form-label', value = '<strong>User Name</strong>' ) }}
                            {{ delete_user.username(class = 'form-control') }}
                        </div>
                        <div class="mb-3">
                            {{ delete_user.submit(class = 'btn btn-danger d-block w-100', value = 'Delete') }}
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-light" type="button" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </article>

{% endblock content %}
